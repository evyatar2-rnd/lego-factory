!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{createContext:()=>ae,createCustomElement:()=>xe,createElement:()=>se,render:()=>re,unmountComponentAtNode:()=>ne,useCallback:()=>he,useContext:()=>fe,useEffect:()=>ce,useEvent:()=>ge,useHost:()=>me,useImperativeHandle:()=>be,useMemo:()=>ue,useProp:()=>ye,useRef:()=>pe,useState:()=>le});const n=Symbol("ELEMENT_TYPE"),r="TEXT_ELEMENT",o=Symbol("EMPTY_HOOK_STATE"),s=e=>void 0===e,i=e=>"object"==typeof e,d=e=>"function"==typeof e,a=e=>Array.isArray(e),l=e=>e.startsWith("on"),p=e=>i(e)&&e.$$type===n,c=e=>"children"!==e&&!l(e),u=(e,t)=>n=>e[n]!==t[n],h=(e,t)=>n=>e[n]!==t[n],f=e=>e&&e.type instanceof Function,v=e=>e.toLowerCase().substring(2),y=(e,t,r=[],o=new Map,d=0)=>{for(let l=0;l<t.length;l++)a(t[l])?y(e,t[l],r,o):(i(t[l])&&t[l].$$type===n&&(t[l].index=d++,t[l].parent=e,t[l].rootNode=e.rootNode,s(t[l].key)||o.set(t[l].key,t[l])),s(t[l])||null===t[l]||!1===t[l]||r.push(t[l]));return{flatten:r,keysMap:o}},m=e=>e.type,g=e=>e.key,b=(e,t)=>{if(e&&e.parent&&e.parent.childrenKeys)return e.parent.childrenKeys.get(t)},w=(e,t)=>{e&&e.handlers&&a(e.handlers[t])&&e.handlers[t].forEach((t=>t(e)))},x=(e,t,n)=>(e&&e.handlers&&a(e.handlers[t])&&e.handlers[t].push(n),()=>{const r=e.handlers[t].findIndex((e=>e===n));e.handlers[t].splice(r,1)}),E=(e,t)=>{if(!a(e)||!a(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},C=e=>{if(e.node)return e.node;if(a(e.children))for(let t=0;t<e.children.length;t++){const n=C(e.children[t]);if(!s(n))return n}},k=e=>"INPUT"===e.tagName,N=e=>"value"===e,P=["string","boolean","number"],R=e=>document.createElement(e.type),T=e=>document.createTextNode(e),M=(e,t)=>{e.appendChild(t)},j=(e,t,n)=>{e.insertBefore(t,n)},S=(e,t={props:{}},n={props:{}})=>{for(const r in t.props)if(l(r)){if(!s(n.props[r])&&!h(t.props,n.props)(r))continue;const o=v(r);e.removeEventListener(o,t.props[r])}else if(c(r)){if(!s(n.props[r])&&!u(t.props,n.props)(r))continue;const o=typeof n.props[r];!P.includes(o)||3===e.nodeType||k(e)&&N(r)?e.hasAttribute&&e.hasAttribute(r)?delete e[r]:e[r]=void 0:e.removeAttribute(r)}for(const o in n.props){if(u(t.props,n.props)(o)&&c(o)&&"ref"!==o)if("style"===o)e[o]=(r=n.props[o],Object.entries(r).map((([e,t])=>`${e.replace(/[A-Z][a-z]*/g,(e=>"-"+e.toLowerCase()))}: ${t}`)).join("; "));else{const t=typeof n.props[o];!P.includes(t)||3===e.nodeType||k(e)&&N(o)?e[o]=n.props[o]:e.setAttribute(o,n.props[o])}if(l(o)&&u(t.props,n.props)(o)){const t=v(o);e.addEventListener(t,n.props[o])}}var r;return e},O=(e,t)=>{e.removeChild(t)},U=e=>{e.remove()};let I,A,$,H=0;const K=()=>{A=new Promise((e=>{I=e}))},B=()=>{d(I)&&I()},L=()=>A,V=(({createInstance:e=R,createTextInstance:t=T,appendChild:n=M,insertBefore:r=j,updateInstance:o=S,removeChild:s=O,remove:i=U}={})=>({createInstance:e,createTextInstance:t,appendChild:n,insertBefore:r,updateInstance:o,removeChild:s,remove:i}))(),_=new Map,F=(e,t)=>(s(t)||(e.node=t.node),V.updateInstance(e.node,t,e),s(e.ref)||(d(e.ref)?e.ref(e.node):e.ref.current=e.node),e.node),W=(e,t)=>{s(t)||V.appendChild(e,t)},Y=(e,t)=>{for(let n=0;n<t.length;n++)W(e,t[n])},z=(e,t)=>{V.insertBefore(t.parentElement,e,t)},X=(e,t)=>{for(let n=0;n<e.length;n++)V.insertBefore(t.parentElement,e[n],t)},Z=e=>{const t=m(e)((n=e.props,{...n,children:1===n.children.length?n.children[0]:n.children}));var n;return a(t)?t:[t]},q=(e,t=[],n=[])=>{const r=t.length,o=n.length,s=Math.max(r,o),i=[];for(let d=0;d<s;d++){const s=d<r?t[d]:void 0,l=d<o?n[d]:void 0,p=ee(e,s,l);a(p)?i.push(...p):i.push(p)}return i},D=e=>{f(e)?e.children=Z(e):(e.node=(e=>{const t=p(n=e)&&n.type===r?V.createTextInstance(e.props.nodeValue):V.createInstance(e);var n;return V.updateInstance(t,void 0,e),t})(e),F(e,void 0));const t=f(e)?e.children:e.props.children,n=q(e,t,void 0);return s(e.node)?n:(Y(e.node,n),e.node)},G=e=>{for(let t=0;t<e.length;t++)J(e[t])},J=e=>{f(e)?G(e.children):(G(e.props.children),(e=>{V.remove(e)})(e.node))},Q=(e,t)=>{e.node=t.node,e.state=t.state,e.hooks=t.hooks,f(e)||F(e,t);const n=f(e)?Z(e):e.props.children,r=f(t)?t.children:t.props.children,o=q(e,n,r);return e.children=n,s(e.node)?o:(Y(e.node,o),e.node)},ee=(e,t,n)=>{if(s(t)&&s(n))return;if(s(t))return void J(n);var r,o;if(t.parent=e,(e=>{$=e,H=-1})(t),o=t,s(r=e)||s(o)||(o.context=r.context),(e=>{p(e)&&(e.handlers={created:[],render:[],willUpdate:[],willRemove:[]})})(t),!s(t)&&s(n))return w(t,"created"),L().then((()=>{w(t,"render")})),D(t);if(t===n){if(t.shouldUpdate||t.parent.shouldUpdate){w(n,"willUpdate"),L().then((()=>{w(t,"render")}));const r=t.isRoot?t.getContainingNode():e.getContainingNode(),o=Q(t,n);Y(r,o),t.shouldUpdate=!1}return}if(m(t)===m(n)&&g(t)===g(n))return w(n,"willUpdate"),L().then((()=>{w(t,"render")})),void Q(t,n);if(g(t)===g(n)||s(g(t))){const e=D(t),r=C(n);return s(r)?e:(a(e)?X(e,r):z(e,r),w(t,"created"),L().then((()=>{w(t,"render")})),void((s(g(n))||s(b(t,g(n))))&&(L().then((()=>{w(n,"willRemove")})),J(n))))}const i=b(n);s(i)||w(i,"willUpdate"),s(i)&&(w(t,"created"),L().then((()=>{w(t,"render")})));const d=s(i)?D(t):Q(t,i),l=C(n);if(s(l))return d;a(d)?X(d,l):z(d,l),(s(g(n))||s(b(t,g(n))))&&(L().then((()=>{w(n,"willRemove")})),J(n))},te=(e,t,n)=>{K(),e.isRoot=!0,e.rootNode=t;const r=ee(void 0,e,_.get(t),t);a(r)?Y(t,r):W(t,r),_.set(t,e),B(),K(),d(n)&&n()},ne=e=>{_.has(e)&&_.delete(e)},re=te,oe=(e,t)=>({$$type:n,type:r,isRoot:!1,rootNode:void 0,ref:void 0,key:void 0,childrenKeys:void 0,parent:void 0,getParent:function(){return this.parent},getContainingNode:function(){if(this.isRoot)return this.rootNode;let e=this.parent;for(;!s(e)&&s(e.node)&&!e.isRoot;)e=e.parent;return e.node||e.rootNode},props:{nodeValue:t,children:[]},hooks:[],context:void 0,handlers:{created:[],render:[],willUpdate:[],didUpdate:[],willRemove:[]}}),se=(e,t,...r)=>{const o={$$type:n,type:e,isRoot:!1,rootNode:void 0,ref:t?t.ref:void 0,key:t?t.key:void 0,parent:void 0,getParent:function(){return this.parent},getContainingNode:function(){if(this.isRoot)return this.rootNode;let e=this.parent;for(;!s(e)&&s(e.node)&&!e.isRoot;)e=e.parent;return e.node||e.rootNode},props:{...t,children:[]},children:[],childrenKeysMap:void 0,hasChildWithKey:e=>!s((void 0).childrenKeysMap)&&(void 0).childrenKeysMap.has(e),renderedChildren:[],hooks:[],context:void 0,handlers:{created:[],render:[],willUpdate:[],didUpdate:[],willRemove:[]}},{flatten:a,keysMap:l}=y(o,r);return o.props.children=a.map((e=>i(e)||d(e)?e:oe(0,e))),o.childrenKeysMap=l,o},ie=()=>$,de=(e,t)=>{const n=(H+=1,$.hooks.length<H&&$.hooks.push(o),H);return[((e,t,n)=>{const r=e.hooks;return r.length<t+1&&r.push(n),r[t]===o&&(r[t]=n),r[t]})(e,n,t),(t,r=!1)=>{((e,t,n)=>{e.hooks[t]=n})(e,n,t),r&&setTimeout((()=>{var t;t=e,K(),t.shouldUpdate=!0,t.isRoot?te(t,t.rootNode):ee(t.parent,t,t),B(),K()}),0)}]},ae=e=>{const t=Symbol();return{Provider:({value:n,children:r})=>{const o=ie();return s(o.context)&&(o.context=new Map,o.context.set(t,s(n)?e:n)),s(n)||n===o.context.get(t)||o.context.set(t,n),r},getStateValue:()=>{const n=ie();return s(n.context)&&(n.context=new Map),s(n.context.get(t))&&n.context.set(t,e),n.context.get(t)}}},le=e=>{const t=ie(),[n,r]=de(t,e);return[n,e=>{r(d(e)?e(n):e,!0)}]},pe=e=>{const t=ie(),[n]=de(t,{current:e});return n},ce=(e,t)=>{const n=ie();s(t)&&((e,t)=>{x(e,"render",(()=>{const n=t();x(e,"willUpdate",n),x(e,"willRemove",n)}))})(n,e),a(t)&&((e,t,n)=>{const[r,o]=de(e,void 0),[s,i]=de(e,(()=>{}));x(e,"render",(()=>{if(!E(n,r)){d(s)&&s(),o(n);const r=t();i(r),x(e,"willRemove",r)}}))})(n,e,t)},ue=(e,t)=>{const n=ie(),[r,s]=de(n,o),[i,d]=de(n,o);if(r===o){const n=e();return s(t),d(n),n}if(E(t,r))return i;{const n=e();return s(t),d(n),n}},he=(e,t)=>ue((()=>e),t),fe=e=>e.getStateValue(),ve=ae(),ye=e=>{const t=fe(ve),[n,r]=le(ve.getStateValue().getProp(e));return ce((()=>{const n=t.register(e,(e=>{r(e)}));return()=>{n()}}),[e,t]),n},me=()=>(fe(ve),pe(ve.getStateValue().host)),ge=(e,{bubbles:t,isCustomEvent:n=!0}={})=>{const r=me();return t=>{const o=n?new CustomEvent(e,{detail:t}):new Event(e,t);r.current.dispatchEvent(o)}},be=(e,t,n)=>{const r=ie(),[i,a]=de(r,o);if(i!==o&&E(n,i));else{if(a(n),s(e)||s(e.current)||!d(t))return;((e,t)=>{Object.keys(t).forEach((n=>{e[n]=t[n]}))})(e.current,t())}},we=[Number,String,Boolean],xe=(e,{base:t=HTMLElement,shadowRoot:n=!1}={})=>{const r=e.propTypes||{},o=(e=>Object.keys(e).filter((t=>{return n=e[t].type,we.includes(n);var n})))(r),s=(e=>Object.keys(e).filter((t=>{return n=e[t].type,!we.includes(n);var n})))(r),i=Object.keys(r).reduce(((e,t)=>({...e,[t]:r[t].initialValue})),{});return class extends t{static get observedAttributes(){return o}constructor(){super(),this.webcomponentHandler=(e=>{const t={},n={};return{host:e,setProp:(e,r)=>{n[e]!==r&&(n[e]=r,t[e]=t[e]||[],((e,t)=>{for(let n=0;n<e.length;n++)e[n](t)})(t[e],r))},getProp:e=>n[e],register:(e,n)=>(t[e]=t[e]||[],t[e].push(n),()=>{t[e]=t[e].filter((e=>e!==n))})}})(this),s.forEach((e=>{Object.defineProperty(this,e,{set(t){i[e]=t,this.webcomponentHandler.setProp(e,t)},get:()=>i[e]})})),n&&this.attachShadow({mode:"open"}),Object.keys(r).forEach((e=>{this.webcomponentHandler.setProp(e,i[e])}))}attributeChangedCallback(e,t,n){const o=r[e].type===Boolean?""===n||"true"===n:r[e].type===Number?parseFloat(n):n;this.webcomponentHandler.setProp(e,o)}connectedCallback(){re(se(ve.Provider,{value:this.webcomponentHandler},se(e,null)),this.shadowRoot?this.shadowRoot:this)}}};return t})()}));
//# sourceMappingURL=index.js.map